@model Company
@inject CateringPro.Core.SharedViewLocalizer Localizer
@using CateringPro.Helpers
@{
    ViewData["Title"] = "Register";
}
@if (true)
{
    <style>

        li.list-group-item.active {
            z-index: 2;
            color: #fff;
            background-color: #F05E25;
            border-color: #F05E25;
        }
    </style>
    <div class="container-xl container container-md container-sm container-lg">
        <div class="row align-items-center pb-3  ml-xl-0 ml-md-0 ml-sm-0 p-0 ml-0" style="margin-top: 48px">
            <div class="col-7 col-xl-9 col-md-6 col-sm-6 align-content-center mr-md-auto pl-0">
                <p class="h2 h2-mob"
                   style="font-weight: 600">
                    @Localizer["Company Data"]
                </p>
            </div>
        </div>
        @if (@Html.ValidationSummary() != null)
        {
            <div id="error" class="col alert-danger">@Html.ValidationSummary()</div>

        }
        <form asp-controller="Company" asp-action="Setting" method="post" role="form" enctype="multipart/form-data" class="col-12 p-0 d-flex justify-content-center flex-column align-items-center">
            @*<form asp-controller="Company" asp-action="Setting" method="post" role="form" enctype="multipart/form-data">*@
            <div class="col-12 col-md-9 col-lg-9 p-0 d-flex flex-md-row flex-lg-row flex-column justify-content-md-between justify-content-lg-between">
                <div class="col-12 col-md-7 col-lg-7 p-0">
                    <div class="col-12 p-0">
                        <div class="col-12 p-0 flex-lg-row flex-md-row flex-column" style="height: 34px">
                        </div>
                        <div class="col-12 p-0  flex-lg-row flex-md-row flex-column">
                            <div class="form-group d-flex flex-lg-row flex-md-row flex-column col-12 px-0 px-md-3 px-lg-3 input-row-black  align-content-center">
                                <input type="hidden" asp-for="Id" />
                                <label asp-for="Country"
                                       class="profile-form-title col-12 col-lg-6 col-md-6 p-0 d-flex align-items-center mb-0"></label>
                                <input asp-for="Country" class="form-control col-12 col-lg-6 col-md-6 pl-9"
                                       placeholder="Smith" style="height: 34px">
                                <span asp-validation-for="Country" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-12 p-0  flex-lg-row flex-md-row flex-column">
                            <div class="form-group d-flex flex-lg-row flex-md-row flex-column col-12 px-0 px-md-3 px-lg-3 input-row-black  align-content-center">
                                <label asp-for="City"
                                       class="profile-form-title col-12 col-lg-6 col-md-6 p-0 d-flex align-items-center mb-0"></label>
                                <input asp-for="City" class="form-control col-12 col-lg-6 col-md-6 pl-9"
                                       placeholder="" style="height: 34px">
                                <span asp-validation-for="City" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-12 p-0  flex-lg-row flex-md-row flex-column">
                            <div class="form-group d-flex flex-lg-row flex-md-row flex-column col-12 px-0 px-md-3 px-lg-3 input-row-black  align-content-center">
                                <label asp-for="ZipCode"
                                       class="profile-form-title col-12 col-lg-6 col-md-6 p-0 d-flex align-items-center mb-0">

                                </label>
                                <input asp-for="ZipCode" class="form-control col-12 col-lg-6 col-md-6 pl-9"
                                       placeholder="" style="height: 34px">
                                <span asp-validation-for="City" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-12 p-0  flex-lg-row flex-md-row flex-column">
                            <div class="form-group d-flex flex-lg-row flex-md-row flex-column col-12 px-0 px-md-3 px-lg-3 input-row-black  align-content-center">
                                <label asp-for="Address1"
                                       class="profile-form-title col-12 col-lg-6 col-md-6 p-0 d-flex align-items-center mb-0">
                                </label>
                                <input asp-for="Address1" class="form-control col-12 col-lg-6 col-md-6 pl-9"
                                       placeholder="" style="height: 34px">
                                <span asp-validation-for="Address1" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-12 p-0  flex-lg-row flex-md-row flex-column">
                            <div class="form-group d-flex flex-lg-row flex-md-row flex-column col-12 px-0 px-md-3 px-lg-3 input-row-black  align-content-center">
                                <label asp-for="Address2"
                                       class="profile-form-title col-12 col-lg-6 col-md-6 p-0 d-flex align-items-center mb-0">
                                </label>
                                <input asp-for="Address2" class="form-control col-12 col-lg-6 col-md-6 pl-9"
                                       placeholder="" style="height: 34px">
                                <span asp-validation-for="Address2" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-12 p-0  flex-lg-row flex-md-row flex-column">
                            <div class="form-group d-flex flex-lg-row flex-md-row flex-column col-12 px-0 px-md-3 px-lg-3 input-row-black  align-content-center">
                                <label asp-for="OrderLeadTimeH"
                                       class="profile-form-title col-12 col-lg-6 col-md-6 p-0 d-flex align-items-center mb-0">
                                </label>
                                <input asp-for="OrderLeadTimeH" class="form-control col-12 col-lg-6 col-md-6 pl-9"
                                       placeholder="" style="height: 34px">
                                <span asp-validation-for="OrderLeadTimeH" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-12 p-0  flex-lg-row flex-md-row flex-column">
                            <div class="form-group d-flex flex-lg-row flex-md-row flex-column col-12 px-0 px-md-3 px-lg-3 input-row-black  align-content-center">
                                <label asp-for="OrderThresholdTimeH"
                                       class="profile-form-title col-12 col-lg-6 col-md-6 p-0 d-flex align-items-center mb-0">
                                </label>
                                <input asp-for="OrderThresholdTimeH" class="form-control col-12 col-lg-6 col-md-6 pl-9"
                                       placeholder="" style="height: 34px">
                                <span asp-validation-for="OrderThresholdTimeH" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-12 p-0  flex-lg-row flex-md-row flex-column">
                            <div class="form-group d-flex flex-lg-row flex-md-row flex-column col-12 px-0 px-md-3 px-lg-3 input-row-black  align-content-center">
                                @{
                                    OrderTypeEnum types = Model.GetOrderType();
                                    string roles = string.Join(",", types);
                                }
                                <label asp-for="OrderType" class="profile-form-title col-12 col-lg-6 col-md-6 p-0 d-flex align-items-center mb-0"></label>
                                <ul class="list-group orderType">
                                    @foreach (var value in @EnumHelper<OrderTypeEnum>.GetValues(Model.GetOrderType()))
                                    {

                                        var description = EnumHelper<OrderTypeEnum>.GetDisplayValue(value);
                                        var classname = "role-item list-group-item";

                                        if (types.HasFlag(value))
                                        {
                                            classname += " active";
                                        }
                                        if (value == OrderTypeEnum.None)
                                        {
                                            continue;
                                        }
                                        <li class="@classname " style="cursor:pointer;" data-val="@value">@Localizer[value.ToString()]</li>

                                    }
                                </ul>
                                <input type="hidden" asp-for="OrderType" />
                                <input type="hidden" id="orderType1" name="orderType1" value="@roles" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-5 col-lg-5 p-0 mb-2">
                    <div class="col-12 px-0 px-md-3 px-lg-3 flex-column">
                        <div class="col-12 p-0 d-flex flex-column mb-lg-5 mb-md-5 mb-4">
                            <label class="profile-form-title" asp-for="PictureId" style="height: 34px"></label>
                            <div class="col-12 p-0 d-flex flex-column justify-content-center align-items-center">
                                <div class="col-7 col-md-12 col-lg-12 p-0">
                                    <img id="imgfilepicture" src="@Url.Action("GetPicture", "Pictures", new { id = Model.PictureId, width = 315, height = 315 })" alt="Upload logo" style="width: inherit">
                                </div>
                                <div class="custom-file mt-3">
                                    <input type="hidden" asp-for="PictureId" />
                                    <input class="custom-file-input"
                                           placeholder=" @Localizer["FileNotChosen"]..." type="file" id="filepicture" name="logopicture"
                                           style="height: 48px; display: flex; align-items: center">
                                    <label class="custom-file-label" id="self-button-logo" for="load-image"
                                           style="height: 48px; display: flex; align-items: center">
                                        @Localizer["FileNotChosen"]
                                    </label>
                                </div>
                            </div>

                        </div>
                        <div class="col-12 p-0 d-flex flex-column">
                            <label class="profile-form-title" asp-for="StampPictureId" style="height: 34px"></label>
                            <div class="col-12 p-0 d-flex flex-column justify-content-center align-items-center">
                                <div class="col-7 col-md-12 col-lg-12 p-0">
                                    <img id="imgstamplogofilepicture" src="@Url.Action("GetPicture", "Pictures", new { id = Model.StampPictureId, width = 315, height = 315 })" alt="Upload seal" style="width: inherit">
                                </div>
                                <div class="custom-file mt-3">
                                    <input type="hidden" asp-for="StampPictureId" />
                                    <input type="file" class="custom-file-input"
                                           placeholder=" @Localizer["FileNotChosen"]..." id="stampfilepicture" name="stamplogopicture"
                                           style="height: 48px; display: flex; align-items: center">
                                    <label class="custom-file-label" id="self-button-seal" for="load-seal"
                                           style="height: 48px; display: flex; align-items: center">
                                        @Localizer["FileNotChosen"]
                                    </label>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 p-0 d-flex justify-content-center mt-5">
                <button type="submit" class="btn btn-primary m-2 col-sm-7 col-xl-3 col-md-5 col-12"
                        style="background: #36C233; border: 1px solid #36C233; height: 48px">
                    @Localizer["Company Setting Save"]
                </button>
            </div>
            @*</form>*@
        </form>
    </div>
}
else
{
    <h2>@Localizer["Company Data"]</h2>
    @if (@Html.ValidationSummary() != null)
    {
        <div id="error" class="col alert-danger">@Html.ValidationSummary()</div>

    }
    <form asp-controller="Company" asp-action="Setting" method="post" class="form-horizontal" role="form" enctype="multipart/form-data">

        <hr />

        <input type="hidden" asp-for="Id" />
        <div class="container">
            <div class="row form-group">
                <label asp-for="City" class="col-md-2 control-label float-left"></label>
                <div class="col-md-10 float-left">
                    <input asp-for="City" class="form-control" />
                    <span asp-validation-for="City" class="text-danger"></span>
                </div>
            </div>
            <div class="row form-group">
                <label asp-for="ZipCode" class="col-md-2 control-label float-left"></label>
                <div class="col-md-10 float-left">
                    <input asp-for="ZipCode" class="form-control" />
                    <span asp-validation-for="ZipCode" class="text-danger"></span>
                </div>
            </div>
            <div class="row form-group">
                <label asp-for="Address1" class="col-md-2 control-label float-left"></label>
                <div class="col-md-10 float-left">
                    <input asp-for="Address1" class="form-control" />
                    <span asp-validation-for="Address1" class="text-danger"></span>
                </div>
            </div>
            <div class="row form-group">
                <label asp-for="Address2" class="col-md-2 control-label float-left"></label>
                <div class="col-md-10 float-left">
                    <input asp-for="Address2" class="form-control" />
                    <span asp-validation-for="Address2" class="text-danger"></span>
                </div>
            </div>
            <div class="row form-group">
                <label asp-for="Country" class="col-md-2 control-label float-left"></label>
                <div class="col-md-10 float-left">
                    <input asp-for="Country" class="form-control" />
                    <span asp-validation-for="Country" class="text-danger"></span>
                </div>
            </div>
            <div class="row  form-group">
                <label asp-for="OrderLeadTimeH" class="col-md-2 control-label float-left"></label>
                <div class="col-md-10 float-left">
                    <input asp-for="OrderLeadTimeH" class="form-control" />
                    <span asp-validation-for="OrderLeadTimeH" class="text-danger"></span>
                </div>
            </div>
            <div class="row  form-group">
                <label asp-for="OrderThresholdTimeH" class="col-md-2 control-label float-left"></label>
                <div class="col-md-10 float-left">
                    <input asp-for="OrderThresholdTimeH" class="form-control" />
                    <span asp-validation-for="OrderThresholdTimeH" class="text-danger"></span>
                </div>
            </div>
            <div class="row form-group">
                @{
                    OrderTypeEnum types = Model.GetOrderType();
                    string roles = string.Join(",", types);
                }
                <label asp-for="OrderType" class="col-md-2 control-label float-left"></label>
                <ul class="list-group orderType">
                    @foreach (var value in @EnumHelper<OrderTypeEnum>.GetValues(Model.GetOrderType()))
                    {

                        var description = EnumHelper<OrderTypeEnum>.GetDisplayValue(value);
                        var classname = "role-item list-group-item";

                        if (types.HasFlag(value))
                        {
                            classname += " active";
                        }
                        if (value == OrderTypeEnum.None)
                        {
                            continue;
                        }
                        <li class="@classname " style="cursor:pointer;" data-val="@value">@Localizer[value.ToString()]</li>

                    }
                </ul>
                <input type="hidden" asp-for="OrderType" />
                <input type="hidden" id="orderType1" name="orderType1" value="@roles" />
            </div>
            <div class="row  form-group">
                <label asp-for="PictureId" class="col-md-2 control-label float-left"></label>
                <div class="col-md-10 float-left">
                    <input type="hidden" asp-for="PictureId" />
                    <input type="file" class="form-control" id="filepicture" name="logopicture" />
                    <img width="450" id="imgfilepicture" height="300" class="form-control" style="width:450px;height:300px;" src="@Url.Action("GetPicture", "Pictures", new { id = Model.PictureId, width = 450, height = 300 })" />

                </div>
            </div>
            <div class="row  form-group">
                <label asp-for="StampPictureId" class="col-md-2 control-label float-left"></label>
                <div class="col-md-10 float-left">
                    <input type="hidden" asp-for="StampPictureId" />
                    <input type="file" class="form-control" id="stampfilepicture" name="stamplogopicture" />
                    <img width="450" id="imgstamplogofilepicture" height="300" class="form-control" style="width:450px;height:300px;" src="@Url.Action("GetPicture", "Pictures", new { id = Model.StampPictureId, width = 450, height = 300 })" />

                </div>
            </div>

            <div class="row form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="@Localizer["Company Setting Save"]" class="btn btn-primary" />
                </div>
            </div>
        </div>


    </form>
}
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script type="text/javascript">

        $(function () {

            function readURL(input, targetcontrolid) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    var target = '#imgfilepicture';
                    if (targetcontrolid)
                        target = targetcontrolid;
                    if (!isFileImage(input.files[0])) {
                        $(target).val('');
                        return;
                    }
                    reader.onload = function (e) {
                        $(target).attr('src', e.target.result);
                    }

                    reader.readAsDataURL(input.files[0]);
                }
            }
            function isFileImage(file) {
                const acceptedImageTypes = ['image/jpeg', 'image/png'];

                return file && acceptedImageTypes.includes(file['type'])
            }
            $(document).on("change", "#filepicture", function () {
                readURL(this);
            });
            $(document).on("change", "#stampfilepicture", function () {
                readURL(this, "#imgstamplogofilepicture");
            });
            $(document).on("click", ".role-item", function (e) {

                e.preventDefault();
                if ($(this).hasClass('active'))
                    $(this).removeClass('active');
                else
                    $(this).addClass('active');

                var roles = $(document).find(".role-item.active").map(function () {
                    return $(this).attr("data-val");
                })
                    .get()
                    .join(", ");
                $("#orderType1").val(roles);
            });


        })
    </script>

}
